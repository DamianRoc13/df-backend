import { HttpService } from '@nestjs/axios';
import { PrismaService } from '../prisma/prisma.service';
import { CreateSubscriptionDto, SubscriptionPlanDto } from './dto/create-subscription.dto';
export declare class PaymentsService {
    private http;
    private prisma;
    constructor(http: HttpService, prisma: PrismaService);
    private bearer;
    private entity;
    private entityRecurring;
    private oppUrl;
    createCheckout(input: any): Promise<any>;
    verifyRecurring(input: {
        merchantTransactionId?: string;
        ndc?: string;
    }): Promise<{
        success: boolean;
        status: string;
        error: string;
        resultCode?: undefined;
        resultDescription?: undefined;
        payment?: undefined;
        subscription?: undefined;
        paymentToken?: undefined;
        gateway?: undefined;
    } | {
        success: boolean;
        status: string;
        resultCode: string;
        resultDescription: string;
        payment: {
            id: string;
            createdAt: Date;
            updatedAt: Date;
            merchantTransactionId: string;
            customerId: string;
            subscriptionId: string | null;
            tokenId: string | null;
            paymentType: import("@prisma/client").$Enums.PaymentType;
            amount: import("@prisma/client/runtime/library").Decimal;
            currency: string;
            base0: import("@prisma/client/runtime/library").Decimal;
            baseImp: import("@prisma/client/runtime/library").Decimal;
            iva: import("@prisma/client/runtime/library").Decimal;
            gatewayResponse: import("@prisma/client/runtime/library").JsonValue;
            resultCode: string;
            resultDescription: string | null;
            resourcePath: string | null;
            status: import("@prisma/client").$Enums.PaymentStatus;
        };
        subscription: {
            id: string;
            createdAt: Date;
            updatedAt: Date;
            customerId: string;
            tokenId: string;
            amount: import("@prisma/client/runtime/library").Decimal;
            currency: string;
            status: import("@prisma/client").$Enums.SubscriptionStatus;
            planType: import("@prisma/client").$Enums.SubscriptionPlan;
            nextBillingDate: Date;
            lastBillingDate: Date | null;
            failedAttempts: number;
            maxRetries: number;
        };
        paymentToken: {
            id: string;
            createdAt: Date;
            updatedAt: Date;
            customerId: string;
            token: string;
            brand: string;
            last4: string;
            expiryMonth: number;
            expiryYear: number;
            isActive: boolean;
        };
        error?: undefined;
        gateway?: undefined;
    } | {
        success: boolean;
        status: string;
        resultCode: any;
        resultDescription: any;
        payment: {
            gatewayResponse: any;
        };
        error?: undefined;
        subscription?: undefined;
        paymentToken?: undefined;
        gateway?: undefined;
    } | {
        success: boolean;
        status: string;
        gateway: any;
        error?: undefined;
        resultCode?: undefined;
        resultDescription?: undefined;
        payment?: undefined;
        subscription?: undefined;
        paymentToken?: undefined;
    }>;
    private getPaymentStatusSafe;
    getPaymentStatus(resourcePath: string, customerId?: string, useRecurringEntity?: boolean): Promise<any>;
    processPaymentCallback(resourcePath: string, data: any): Promise<any>;
    private determinePaymentStatus;
    private waitForPaymentCompletion;
    createSubscriptionCheckout(dto: CreateSubscriptionDto): Promise<any>;
    completeSubscriptionSetup(resourcePath: string, customerId: string, planType: SubscriptionPlanDto): Promise<{
        subscription: {
            customer: {
                id: string;
                merchantCustomerId: string;
                email: string;
                givenName: string;
                middleName: string;
                surname: string;
                identificationDocType: string;
                identificationDocId: string;
                phone: string;
                street1: string;
                city: string;
                state: string;
                country: string;
                postcode: string;
                createdAt: Date;
                updatedAt: Date;
            };
            payments: {
                id: string;
                createdAt: Date;
                updatedAt: Date;
                merchantTransactionId: string;
                customerId: string;
                subscriptionId: string | null;
                tokenId: string | null;
                paymentType: import("@prisma/client").$Enums.PaymentType;
                amount: import("@prisma/client/runtime/library").Decimal;
                currency: string;
                base0: import("@prisma/client/runtime/library").Decimal;
                baseImp: import("@prisma/client/runtime/library").Decimal;
                iva: import("@prisma/client/runtime/library").Decimal;
                gatewayResponse: import("@prisma/client/runtime/library").JsonValue;
                resultCode: string;
                resultDescription: string | null;
                resourcePath: string | null;
                status: import("@prisma/client").$Enums.PaymentStatus;
            }[];
            token: {
                id: string;
                createdAt: Date;
                updatedAt: Date;
                customerId: string;
                token: string;
                brand: string;
                last4: string;
                expiryMonth: number;
                expiryYear: number;
                isActive: boolean;
            };
        } & {
            id: string;
            createdAt: Date;
            updatedAt: Date;
            customerId: string;
            tokenId: string;
            amount: import("@prisma/client/runtime/library").Decimal;
            currency: string;
            status: import("@prisma/client").$Enums.SubscriptionStatus;
            planType: import("@prisma/client").$Enums.SubscriptionPlan;
            nextBillingDate: Date;
            lastBillingDate: Date | null;
            failedAttempts: number;
            maxRetries: number;
        };
        paymentToken: {
            id: string;
            createdAt: Date;
            updatedAt: Date;
            customerId: string;
            token: string;
            brand: string;
            last4: string;
            expiryMonth: number;
            expiryYear: number;
            isActive: boolean;
        };
        paymentResult: any;
        customerId: string;
    }>;
    processRecurringPayment(subscriptionId: string): Promise<{
        payment: {
            customer: {
                id: string;
                merchantCustomerId: string;
                email: string;
                givenName: string;
                middleName: string;
                surname: string;
                identificationDocType: string;
                identificationDocId: string;
                phone: string;
                street1: string;
                city: string;
                state: string;
                country: string;
                postcode: string;
                createdAt: Date;
                updatedAt: Date;
            };
            subscription: {
                id: string;
                createdAt: Date;
                updatedAt: Date;
                customerId: string;
                tokenId: string;
                amount: import("@prisma/client/runtime/library").Decimal;
                currency: string;
                status: import("@prisma/client").$Enums.SubscriptionStatus;
                planType: import("@prisma/client").$Enums.SubscriptionPlan;
                nextBillingDate: Date;
                lastBillingDate: Date | null;
                failedAttempts: number;
                maxRetries: number;
            };
            token: {
                id: string;
                createdAt: Date;
                updatedAt: Date;
                customerId: string;
                token: string;
                brand: string;
                last4: string;
                expiryMonth: number;
                expiryYear: number;
                isActive: boolean;
            };
        } & {
            id: string;
            createdAt: Date;
            updatedAt: Date;
            merchantTransactionId: string;
            customerId: string;
            subscriptionId: string | null;
            tokenId: string | null;
            paymentType: import("@prisma/client").$Enums.PaymentType;
            amount: import("@prisma/client/runtime/library").Decimal;
            currency: string;
            base0: import("@prisma/client/runtime/library").Decimal;
            baseImp: import("@prisma/client/runtime/library").Decimal;
            iva: import("@prisma/client/runtime/library").Decimal;
            gatewayResponse: import("@prisma/client/runtime/library").JsonValue;
            resultCode: string;
            resultDescription: string | null;
            resourcePath: string | null;
            status: import("@prisma/client").$Enums.PaymentStatus;
        };
        paymentResult: any;
        success: boolean;
    }>;
    getDueSubscriptions(): Promise<({
        customer: {
            id: string;
            merchantCustomerId: string;
            email: string;
            givenName: string;
            middleName: string;
            surname: string;
            identificationDocType: string;
            identificationDocId: string;
            phone: string;
            street1: string;
            city: string;
            state: string;
            country: string;
            postcode: string;
            createdAt: Date;
            updatedAt: Date;
        };
        token: {
            id: string;
            createdAt: Date;
            updatedAt: Date;
            customerId: string;
            token: string;
            brand: string;
            last4: string;
            expiryMonth: number;
            expiryYear: number;
            isActive: boolean;
        };
    } & {
        id: string;
        createdAt: Date;
        updatedAt: Date;
        customerId: string;
        tokenId: string;
        amount: import("@prisma/client/runtime/library").Decimal;
        currency: string;
        status: import("@prisma/client").$Enums.SubscriptionStatus;
        planType: import("@prisma/client").$Enums.SubscriptionPlan;
        nextBillingDate: Date;
        lastBillingDate: Date | null;
        failedAttempts: number;
        maxRetries: number;
    })[]>;
    pauseSubscription(subscriptionId: string): Promise<{
        id: string;
        createdAt: Date;
        updatedAt: Date;
        customerId: string;
        tokenId: string;
        amount: import("@prisma/client/runtime/library").Decimal;
        currency: string;
        status: import("@prisma/client").$Enums.SubscriptionStatus;
        planType: import("@prisma/client").$Enums.SubscriptionPlan;
        nextBillingDate: Date;
        lastBillingDate: Date | null;
        failedAttempts: number;
        maxRetries: number;
    }>;
    cancelSubscription(subscriptionId: string): Promise<{
        id: string;
        createdAt: Date;
        updatedAt: Date;
        customerId: string;
        tokenId: string;
        amount: import("@prisma/client/runtime/library").Decimal;
        currency: string;
        status: import("@prisma/client").$Enums.SubscriptionStatus;
        planType: import("@prisma/client").$Enums.SubscriptionPlan;
        nextBillingDate: Date;
        lastBillingDate: Date | null;
        failedAttempts: number;
        maxRetries: number;
    }>;
    resumeSubscription(subscriptionId: string): Promise<{
        id: string;
        createdAt: Date;
        updatedAt: Date;
        customerId: string;
        tokenId: string;
        amount: import("@prisma/client/runtime/library").Decimal;
        currency: string;
        status: import("@prisma/client").$Enums.SubscriptionStatus;
        planType: import("@prisma/client").$Enums.SubscriptionPlan;
        nextBillingDate: Date;
        lastBillingDate: Date | null;
        failedAttempts: number;
        maxRetries: number;
    }>;
}
